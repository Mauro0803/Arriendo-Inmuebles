CREATE TABLE public.usuario (
	usu_rut varchar(9) primary key,
	usu_nombre1 varchar(20) NOT NULL,
	usu_nombre2 varchar(20) NULL,
	usu_apellido1 varchar(20) NOT NULL,
	usu_apellido2 varchar(20) NULL,
	usu_direccion varchar(30) NOT NULL,
	usu_telefono varchar(15) NOT NULL,
	usu_correo varchar(50) NOT NULL,
	
	fk_tu_id int4 NULL,
	fk_inm_id int4 NULL,
	FOREIGN KEY (fk_tu_id) REFERENCES Tipo_Usuario(tu_id),
	FOREIGN KEY (fk_inm_id) REFERENCES Inmueble(inm_id)
);


CREATE TABLE public.tipo_usuario (
	tu_id serial4 primary KEY,
	tu_tipo bpchar(20) NOT null UNIQUE
);


CREATE TABLE public.tipo_inmueble (
	ti_id serial4 primary KEY,
	ti_tipo bpchar(20) NOT null UNIQUE
);


CREATE TABLE public.region (
	reg_id serial4 primary KEY,
	reg_region bpchar(20) not null UNIQUE
);


CREATE TABLE public.inmueble (
	inm_id serial4 primary KEY,
	inm_nombre bpchar(50) not NULL,
	inm_descripcion text NULL,
	inm_m2_construidos numeric(6, 2) NULL,
	inm_m2_totales numeric(6, 2) NULL,
	inm_estacionamientos int4 NULL,
	inm_habitaciones int4 NULL,
	inm_banos int4 NULL,
	inm_direccion bpchar(30) NULL,
	inm_precio int4 NULL,
	
	fk_com_id int4 NULL,
	fk_reg_id int4 NULL,
	fk_ti_id int4 NULL,
	
	FOREIGN KEY (fk_com_id) REFERENCES Comuna(com_id),
	FOREIGN KEY (fk_reg_id) REFERENCES Region(reg_id),
	FOREIGN KEY (fk_ti_id) REFERENCES Tipo_Inmueble(ti_id)
	);


CREATE TABLE public.comuna (
	com_id serial4 primary KEY,
	com_comuna bpchar(20) not null UNIQUE
);